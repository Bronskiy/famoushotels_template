<h2>All Hotels</h2>

<p><strong>{exp:query sql="SELECT COUNT(entry_id) AS number FROM `exp_channel_titles` WHERE channel_id = '4' AND (status = 'open' OR status='Full Plan')"}{number} hotels in {/exp:query}{exp:query sql="SELECT COUNT(DISTINCT field_id_7) AS cities,  COUNT(DISTINCT field_id_8) AS countries FROM `exp_channel_data` WHERE field_id_7 <> '' AND channel_id = '4'"}{cities} cities and {countries} countries{/exp:query}</strong> are allowed to bear the title "<strong>A Select Member of The Most Famous Hotels in the World</strong>". Find all hotels here:</p>

<div id="dropdown">
<form>

<p><select onchange="request(this.options[this.selectedIndex].value,'city_replace'); elem = document.getElementById('hotel_replace'); elem.style.visibility = 'hidden';">

<option value="/index.php/includes/city_info/all/">Choose a country ... </option>
{exp:query sql="SELECT DISTINCT field_id_8 AS countries FROM `exp_channel_data` JOIN exp_channel_titles ON exp_channel_data.entry_id = exp_channel_titles.entry_id WHERE exp_channel_data.channel_id = '4' AND exp_channel_titles.status = 'open' ORDER BY field_id_8 ASC"}
<option value="/index.php/includes/city_info/{countries}/">{countries} </option>
{/exp:query}
</select></p>

<div id="city_replace">
<p><select onchange="request(this.options[this.selectedIndex].value,'hotel_replace');">

<option value="">... or choose a city ... </option>
{exp:query sql="SELECT DISTINCT field_id_7 AS cities FROM `exp_channel_data` JOIN exp_channel_titles ON  exp_channel_data.entry_id = exp_channel_titles.entry_id WHERE exp_channel_data.channel_id = '4' AND exp_channel_titles.status = 'open' ORDER BY field_id_7 ASC"}
<option value="/index.php/includes/list_hotels/all/{cities}">{cities} </option>

{/exp:query}
</select>
</p>
</div>

</form>

<div id="hotel_replace">

</div>
</div>